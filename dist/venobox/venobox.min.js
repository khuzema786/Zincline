!function(y){"use strict";var w,C,_,B,P,E,O,D,M,N,U,V,z,R,X,Y,j,W,q,$,I,A,H,Q,S,T,Z,F,G,J,K,L,ee,oe,te,ae,ie;y.fn.extend({venobox:function(e){var k=this,x=y.extend({arrowsColor:"#B6B6B6",autoplay:!1,bgcolor:"#fff",border:"0",closeBackground:"#161617",closeColor:"#d2d2d2",framewidth:"",frameheight:"",infinigall:!1,htmlClose:"&times;",htmlNext:"<span>Next</span>",htmlPrev:"<span>Prev</span>",numeratio:!1,numerationBackground:"#161617",numerationColor:"#d2d2d2",numerationPosition:"top",overlayClose:!0,overlayColor:"rgba(23,23,23,0.85)",spinner:"double-bounce",spinColor:"#d2d2d2",titleattr:"title",titleBackground:"#161617",titleColor:"#d2d2d2",titlePosition:"top",cb_pre_open:function(){return!0},cb_post_open:function(){},cb_pre_close:function(){return!0},cb_post_close:function(){},cb_post_resize:function(){},cb_after_nav:function(){},cb_init:function(){}},e);return x.cb_init(k),this.each(function(){function o(){W=S.data("gall"),R=S.data("numeratio"),U=S.data("infinigall"),W=y('.vbox-item[data-gall="'+W+'"]'),q=W.eq(W.index(S)+1),$=W.eq(W.index(S)-1),q.length||!0!==U||(q=W.eq(0)),1<W.length?(T=W.index(S)+1,_.html(T+" / "+W.length)):T=1,!0===R?_.show():_.hide(),""!==j?B.show():B.hide(),I=q.length||!0===U?(y(".vbox-next").css("display","block"),!0):(y(".vbox-next").css("display","none"),!1),!0!==(A=0<W.index(S)||!0===U?(y(".vbox-prev").css("display","block"),!0):(y(".vbox-prev").css("display","none"),!1))&&!0!==I||(E.on(h.DOWN,e),E.on(h.MOVE,s),E.on(h.UP,n))}function a(e){e.length<1||V||(V=!0,X=e.data("overlay")||e.data("overlaycolor"),M=e.data("framewidth"),N=e.data("frameheight"),P=e.data("border"),C=e.data("bgcolor"),O=e.data("href")||e.attr("href"),w=e.data("autoplay"),j=e.attr(e.data("titleattr"))||"",e===$&&E.addClass("animated").addClass("swipe-right"),e===q&&E.addClass("animated").addClass("swipe-left"),E.animate({opacity:0},500,function(){Y.css("background",X),E.removeClass("animated").removeClass("swipe-left").removeClass("swipe-right").css({"margin-left":0,"margin-right":0}),"iframe"==e.data("vbtype")?r():"inline"==e.data("vbtype")?l():"ajax"==e.data("vbtype")?c():"video"==e.data("vbtype")||"vimeo"==e.data("vbtype")||"youtube"==e.data("vbtype")?d(w):(E.html('<img src="'+O+'">'),v()),S=e,o(),V=!1,x.cb_after_nav(S,T,q,$)}))}function t(e){27===e.keyCode&&i(),37==e.keyCode&&!0===A&&a($),39==e.keyCode&&!0===I&&a(q)}function i(){!1!==x.cb_pre_close(S,T,q,$)&&(y("body").off("keydown",t).removeClass("vbox-open"),S.focus(),Y.animate({opacity:0},500,function(){Y.remove(),V=!1,x.cb_post_close()}))}function e(e){E.addClass("animated"),J=L=e.pageY,K=ee=e.pageX,Z=!0}function s(e){var o;!0===Z&&(ee=e.pageX,L=e.pageY,te=ee-K,ae=L-J,o=Math.abs(te),Math.abs(ae)<o&&o<=100&&(e.preventDefault(),E.css("margin-left",te)))}function n(e){var o,t;!0===Z&&(o=S,t=Z=!1,(oe=ee-K)<0&&!0===I&&(o=q,t=!0),0<oe&&!0===A&&(o=$,t=!0),Math.abs(oe)>=ie&&!0===t?a(o):E.css({"margin-left":0,"margin-right":0}))}function c(){y.ajax({url:O,cache:!1}).done(function(e){E.html('<div class="vbox-inline">'+e+"</div>"),v()}).fail(function(){E.html('<div class="vbox-inline"><p>Error retrieving contents, please retry</div>'),u()})}function r(){E.html('<iframe class="venoframe" src="'+O+'"></iframe>'),u()}function d(e){var o,t=function(e){{var o;e.match(/(http:|https:|)\/\/(player.|www.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com))\/(video\/|embed\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(\&\S+)?/),-1<RegExp.$3.indexOf("youtu")?o="youtube":-1<RegExp.$3.indexOf("vimeo")&&(o="vimeo")}return{type:o,id:RegExp.$6}}(O),e=(e?"?rel=0&autoplay=1":"?rel=0")+function(e){var o="",e=decodeURIComponent(e).split("?");if(void 0!==e[1]){var t,a,i=e[1].split("&");for(a=0;a<i.length;a++)t=i[a].split("="),o=o+"&"+t[0]+"="+t[1]}return encodeURI(o)}(O);"vimeo"==t.type?o="https://player.vimeo.com/video/":"youtube"==t.type&&(o="https://www.youtube.com/embed/"),E.html('<iframe class="venoframe vbvid" webkitallowfullscreen mozallowfullscreen allowfullscreen frameborder="0" src="'+o+t.id+e+'"></iframe>'),u()}function l(){E.html('<div class="vbox-inline">'+y(O).html()+"</div>"),u()}function v(){(G=E.find("img")).length?G.each(function(){y(this).one("load",function(){u()})}):u()}function u(){B.html(j),E.find(">:first-child").addClass("figlio").css({width:M,height:N,padding:P,background:C}),y("img.figlio").on("dragstart",function(e){e.preventDefault()}),b(),E.animate({opacity:"1"},"slow",function(){})}function b(){var e=E.outerHeight(),o=y(window).height();z=e+60<o?(o-e)/2:"30px",E.css("margin-top",z),E.css("margin-bottom",z),x.cb_post_resize()}if((S=y(this)).data("venobox"))return!0;k.VBclose=function(){i()},S.addClass("vbox-item"),S.data("framewidth",x.framewidth),S.data("frameheight",x.frameheight),S.data("border",x.border),S.data("bgcolor",x.bgcolor),S.data("numeratio",x.numeratio),S.data("infinigall",x.infinigall),S.data("overlaycolor",x.overlayColor),S.data("titleattr",x.titleattr),S.data("venobox",!0),S.on("click",function(e){e.preventDefault(),S=y(this);e=x.cb_pre_open(S);if(!1!==e){switch(k.VBnext=function(){a(q)},k.VBprev=function(){a($)},X=S.data("overlay")||S.data("overlaycolor"),M=S.data("framewidth"),N=S.data("frameheight"),w=S.data("autoplay")||x.autoplay,P=S.data("border"),C=S.data("bgcolor"),V=A=I=!1,O=S.data("href")||S.attr("href"),D=S.data("css")||"",j=S.attr(S.data("titleattr"))||"",H='<div class="vbox-preloader">',x.spinner){case"rotating-plane":H+='<div class="sk-rotating-plane"></div>';break;case"double-bounce":H+='<div class="sk-double-bounce"><div class="sk-child sk-double-bounce1"></div><div class="sk-child sk-double-bounce2"></div></div>';break;case"wave":H+='<div class="sk-wave"><div class="sk-rect sk-rect1"></div><div class="sk-rect sk-rect2"></div><div class="sk-rect sk-rect3"></div><div class="sk-rect sk-rect4"></div><div class="sk-rect sk-rect5"></div></div>';break;case"wandering-cubes":H+='<div class="sk-wandering-cubes"><div class="sk-cube sk-cube1"></div><div class="sk-cube sk-cube2"></div></div>';break;case"spinner-pulse":H+='<div class="sk-spinner sk-spinner-pulse"></div>';break;case"three-bounce":H+='<div class="sk-three-bounce"><div class="sk-child sk-bounce1"></div><div class="sk-child sk-bounce2"></div><div class="sk-child sk-bounce3"></div></div>';break;case"cube-grid":H+='<div class="sk-cube-grid"><div class="sk-cube sk-cube1"></div><div class="sk-cube sk-cube2"></div><div class="sk-cube sk-cube3"></div><div class="sk-cube sk-cube4"></div><div class="sk-cube sk-cube5"></div><div class="sk-cube sk-cube6"></div><div class="sk-cube sk-cube7"></div><div class="sk-cube sk-cube8"></div><div class="sk-cube sk-cube9"></div></div>'}H+="</div>",Q='<a class="vbox-next">'+x.htmlNext+'</a><a class="vbox-prev">'+x.htmlPrev+"</a>",F='<div class="vbox-title"></div><div class="vbox-num">0/0</div><div class="vbox-close">'+x.htmlClose+"</div>",D='<div class="vbox-overlay '+D+'" style="background:'+X+'">'+H+'<div class="vbox-container"><div class="vbox-content"></div></div>'+F+Q+"</div>",y("body").append(D).addClass("vbox-open"),y(".vbox-preloader .sk-child, .vbox-preloader .sk-rotating-plane, .vbox-preloader .sk-rect, .vbox-preloader .sk-cube, .vbox-preloader .sk-spinner-pulse").css("background-color",x.spinColor),Y=y(".vbox-overlay"),y(".vbox-container"),E=y(".vbox-content"),_=y(".vbox-num"),(B=y(".vbox-title")).css(x.titlePosition,"-1px"),B.css({color:x.titleColor,"background-color":x.titleBackground}),y(".vbox-close").css({color:x.closeColor,"background-color":x.closeBackground}),y(".vbox-num").css(x.numerationPosition,"-1px"),y(".vbox-num").css({color:x.numerationColor,"background-color":x.numerationBackground}),y(".vbox-next span, .vbox-prev span").css({"border-top-color":x.arrowsColor,"border-right-color":x.arrowsColor}),E.html(""),E.css("opacity","0"),Y.css("opacity","0"),o(),Y.animate({opacity:1},250,function(){"iframe"==S.data("vbtype")?r():"inline"==S.data("vbtype")?l():"ajax"==S.data("vbtype")?c():"video"==S.data("vbtype")||"vimeo"==S.data("vbtype")||"youtube"==S.data("vbtype")?d(w):(E.html('<img src="'+O+'">'),v()),x.cb_post_open(S,T,q,$)}),y("body").keydown(t),y(".vbox-prev").on("click",function(){a($)}),y(".vbox-next").on("click",function(){a(q)})}return!1});function p(e){var o;switch(e.type){case"mousedown":o=h.DOWN;break;case"mouseup":case"mouseout":o=h.UP;break;case"mousemove":o=h.MOVE;break;default:return}var t=g(o,e,e.pageX,e.pageY);y(e.target).trigger(t)}function m(e){var o;switch(e.type){case"touchstart":o=h.DOWN;break;case"touchend":o=h.UP;break;case"touchmove":o=h.MOVE;break;default:return}var t=e.originalEvent.touches[0],t=o==h.UP?g(o,e,null,null):g(o,e,t.pageX,t.pageY);y(e.target).trigger(t)}var f=".vbox-overlay",h=(x.overlayClose||(f=".vbox-close"),y(document).on("click",f,function(e){(y(e.target).is(".vbox-overlay")||y(e.target).is(".vbox-content")||y(e.target).is(".vbox-close")||y(e.target).is(".vbox-preloader"))&&i()}),oe=ee=K=0,Z=!(ie=50),{DOWN:"touchmousedown",UP:"touchmouseup",MOVE:"touchmousemove"}),g=function(e,o,t,a){return y.Event(e,{pageX:t,pageY:a,originalEvent:o})};"ontouchstart"in window?(y(document).on("touchstart",m),y(document).on("touchmove",m),y(document).on("touchend",m)):(y(document).on("mousedown",p),y(document).on("mouseup",p),y(document).on("mouseout",p),y(document).on("mousemove",p)),y(window).resize(function(){y(".vbox-content").length&&setTimeout(b(),800)})})}})}(jQuery);